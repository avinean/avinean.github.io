function handleAsmSessionStart() {
    var form = document.getElementById('_asmPersonifyForm');
    if (validateOpportunity(form)) {
        return true;
    }
    $('#asmOpportunityPopup').foundation('reveal', 'open');
    $('#popupOpportunityId').keyup(togglePopupStartSessionButton);
    return false;
}

function handlePopupAsmSessionStart() {
    var form = document.getElementById('_asmPersonifyForm');
    var opportunityIdInput = document.getElementById('popupOpportunityId');
    form.opportunityId.value=opportunityIdInput.value;
    return true;
}

function togglePopupStartSessionButton() {
    var popupInput = $('#popupOpportunityId').val();
    var startSessionButton = $('button.ASM-popup-start-session-quote');
    if (popupInput.length > 0) {
        startSessionButton.removeAttr('disabled');
    } else {
        startSessionButton.attr('disabled', true);
    }
}

function validateOpportunity(form) {
    return form.opportunityId.value.length > 0;
}